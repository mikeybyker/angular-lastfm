!function(){"use strict";function t(){var t="http://ws.audioscrobbler.com/2.0/",r={api_key:null,format:"json"};this.setAPIKey=function(t){return r.api_key=t,r.api_key},this.getAPIKey=function(){return r.api_key},this.setFormat=function(t){return r.format=t,r.format},this.getFormat=function(){return r.format},this.setEndPoint=function(r){return t=r},this.getEndPoint=function(){return t},this.$get=["$q","$http",function(a,n){function i(){if(this.version="1.0.0",!r.api_key)throw"LastFm API key NOT set : Use setAPIKey on the provider in config..."}function s(r,a){var i=e(r,a);return n.get(t,{params:i})}function e(t,a){return angular.extend({},r,t,a||{})}function o(t,r){return r=r||"artist",u(t[r])&&(t.mbid=t[r],t[r]=""),t}function u(t){return J.test(t)}function d(t,r,a){var n={artist:t,album:r,method:"album.getinfo"};return n=o(n),s(n,a)}function c(t,r,a){return d.apply(this,arguments).then(function(t){return t.data.error||!t.data.album?H(t,"Couldn't find this album"):t.data.album})}function h(t,r,a){var n={method:"album.gettoptags",album:r,artist:t};return n=o(n),s(n,a)}function f(t,r,a){return h.apply(this,arguments).then(function(t){return t.data.error||!t.data.toptags?H(t,"Error looking up tags"):t.data.toptags.tag})}function p(t,r){var a={album:t,method:"album.search"};return s(a,r)}function g(t,r){return p.apply(this,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.albummatches?t.data.results.albummatches.album:H(t,"Couldn't find this album")})}function l(t,r){var a={artist:t,method:"artist.getinfo"};return a=o(a),s(a,r)}function m(t,r){return l.apply(this,arguments).then(function(t){return t.data.error||!t.data.artist?H(t,"Couldn't find artist"):t.data.artist})}function b(t,r){var a={artist:t,method:"artist.getsimilar"};return a=o(a),s(a,r)}function k(t,r){return b.apply(this,arguments).then(function(t){return t.data.error||!t.data.similarartists?H(t,"Couldn't find similar artists"):t.data.similarartists.artist})}function T(t,r){var a={artist:t,method:"artist.gettopalbums"};return a=o(a),s(a,r)}function y(t,r){return T.apply(this,arguments).then(function(t){return t.data.error||!t.data.topalbums?H(t,"Couldn't find albums"):t.data.topalbums.album})}function v(t,r){var a={artist:t,method:"artist.gettoptags"};return a=o(a),s(a,r)}function _(t,r){return v.apply(this,arguments).then(function(t){return t.data.error||!t.data.toptags?H(t,"Couldn't find tags"):t.data.toptags.tag})}function C(t,r){var a={artist:t,method:"artist.gettoptracks"};return a=o(a),s(a,r)}function A(t,r){return C.apply(this,arguments).then(function(t){return t.data.error||!t.data.toptracks?H(t,"Couldn't find tracks"):t.data.toptracks.track})}function I(t,r){var a={artist:t,method:"artist.search"};return s(a,r)}function F(t,r){return I.apply(this,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.artistmatches?t.data.results.artistmatches.artist:H(t,"Couldn't find artist")})}function P(t){var r={method:"chart.gettopartists"};return s(r,t)}function E(t){return P.apply(this,arguments).then(function(t){return t.data.error||!t.data.artists?H(t,"Couldn't find artist"):t.data.artists.artist})}function S(t){var r={method:"chart.gettoptags"};return s(r,t)}function $(t){return S.apply(this,arguments).then(function(t){return t.data.error||!t.data.tags?H(t,"Couldn't find tags"):t.data.tags.tag})}function w(t){var r={method:"chart.gettoptracks"};return s(r,t)}function K(t){return w.apply(this,arguments).then(function(t){return t.data.error||!t.data.tracks?H(t,"Couldn't find tracks"):t.data.tracks.track})}function j(t,r){var a={country:t,method:"geo.gettopartists"};return s(a,r)}function x(t,r){return j.apply(this,arguments).then(function(t){return t.data.error||!t.data.topartists?H(t,"Couldn't find artists"):t.data.topartists.artist})}function L(t,r){var a={country:t,method:"geo.gettoptracks"};return s(a,r)}function M(t,r){return L.apply(this,arguments).then(function(t){return t.data.error||!t.data.tracks?H(t,"Couldn't find tracks"):t.data.tracks.track})}function q(t,r,a){var n={artist:t,track:r,method:"track.getInfo"};return n=o(n),s(n,a)}function G(t,r,a){return q.apply(this,arguments).then(function(t){return t.data.error||!t.data.track?H(t,"Couldn't find track"):t.data.track})}function N(t,r,a){var n={artist:t,track:r,method:"track.getsimilar"};return n=o(n),s(n,a)}function O(t,r,a){return N.apply(this,arguments).then(function(t){return t.data.error||!t.data.similartracks?H(t,"Couldn't find similar tracks"):t.data.similartracks.track})}function U(t,r,a){var n={artist:t,track:r,method:"track.gettoptags"};return n=o(n),s(n,a)}function z(t,r,a){return U.apply(this,arguments).then(function(t){return t.data.error||!t.data.toptags?H(t,"Couldn't find tags"):t.data.toptags.tag})}function B(t,r){var a={track:t,method:"track.search"};return s(a,r)}function D(t,r){return B.apply(i.prototype,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.trackmatches?t.data.results.trackmatches.track:H(t,"Couldn't find track")})}function H(t,r){var n={error:t.data.error||!0,statusText:t.data.message||r||"Error"};return a.reject(n)}var J=/^[a-fA-F0-9]{8}(-[a-fA-F0-9]{4}){3}-[a-fA-F0-9]{12}$/;i.prototype={getParams:e,isMbid:u,Album:{getInfo:c.bind(this),getTopTags:f.bind(this),search:g.bind(this),_getInfo:d.bind(this),_getTopTags:h.bind(this),_search:p.bind(this)},Artist:{getInfo:m.bind(this),getSimilar:k.bind(this),getTopAlbums:y.bind(this),getTopTags:_.bind(this),getTopTracks:A.bind(this),search:F.bind(this),_getInfo:l.bind(this),_getSimilar:b.bind(this),_getTopAlbums:T.bind(this),_getTopTags:v.bind(this),_getTopTracks:C.bind(this),_search:I.bind(this)},Charts:{getTopArtists:E.bind(this),getTopTags:$.bind(this),getTopTracks:K.bind(this),_getTopArtists:P.bind(this),_getTopTags:S.bind(this),_getTopTracks:w.bind(this)},Geo:{getTopArtists:x.bind(this),getTopTracks:M.bind(this),_getTopArtists:j.bind(this),_getTopTracks:L.bind(this)},Track:{getInfo:G.bind(this),getSimilar:O.bind(this),getTopTags:z.bind(this),search:D.bind(this),_getInfo:q.bind(this),_getSimilar:N.bind(this),_getTopTags:U.bind(this),_search:B.bind(this)}};i.prototype;return new i}]}angular.module("lastfm",[]).provider("LastFM",t)}();
//# sourceMappingURL=maps/angular.lastfm.min.js.map
