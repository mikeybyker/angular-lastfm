!function(){"use strict";function t(){var t="http://ws.audioscrobbler.com/2.0/",r={api_key:null,format:"json"};this.setAPIKey=function(t){return r.api_key=t,r.api_key},this.getAPIKey=function(){return r.api_key},this.setFormat=function(t){return r.format=t,r.format},this.getFormat=function(){return r.format},this.setEndPoint=function(r){return t=r},this.getEndPoint=function(){return t},this.$get=["$q","$http",function(a,n){function e(){if(this.version="1.0.0",!r.api_key)throw"LastFm API key NOT set : Use setAPIKey on the provider in config..."}function o(r,a){var e=u(r,a);return n.get(t,{params:e})}function u(t,a){return angular.extend({},r,t,a||{})}function s(t,r){return r=r||"artist",i(t[r])&&(t.mbid=t[r],t[r]=""),t}function i(t){return Q.test(t)}function c(t,r,a){var n={artist:t,album:r,method:"album.getinfo"};return n=s(n),o(n,a)}function d(t,r,a){return c.apply(R,arguments).then(function(t){return t.data.error||!t.data.album?J(t,"Couldn't find this album"):t.data.album})}function f(t,r){var a={album:t,method:"album.search"};return o(a,r)}function p(t,r){return f.apply(R,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.albummatches?t.data.results.albummatches.album:J(t,"Couldn't find this album")})}function l(t,r,a){var n={method:"album.gettoptags",album:r,artist:t};return n=s(n),o(n,a)}function m(t,r,a){return l.apply(R,arguments).then(function(t){return t.data.error||!t.data.toptags?J(t,"Error looking up tags"):t.data.toptags.tag})}function h(t,r){var a={artist:t,method:"artist.gettopalbums"};return a=s(a),o(a,r)}function g(t,r){return h.apply(R,arguments).then(function(t){return t.data.error||!t.data.topalbums?J(t,"Couldn't find albums"):t.data.topalbums.album})}function k(t,r){var a={artist:t,method:"artist.getinfo"};return a=s(a),o(a,r)}function y(t,r){return k.apply(R,arguments).then(function(t){return t.data.error||!t.data.artist?J(t,"Couldn't find artist"):t.data.artist})}function b(t,r){var a={artist:t,method:"artist.search"};return o(a,r)}function v(t,r){return b.apply(R,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.artistmatches?t.data.results.artistmatches.artist:J(t,"Couldn't find artist")})}function _(t,r){var a={artist:t,method:"artist.getsimilar"};return a=s(a),o(a,r)}function C(t,r){return _.apply(R,arguments).then(function(t){return t.data.error||!t.data.similarartists?J(t,"Couldn't find similar artists"):t.data.similarartists.artist})}function T(t,r){var a={artist:t,method:"artist.gettoptags"};return a=s(a),o(a,r)}function A(t,r){return T.apply(R,arguments).then(function(t){return t.data.error||!t.data.toptags?J(t,"Couldn't find tags"):t.data.toptags.tag})}function F(t,r){var a={artist:t,method:"artist.gettoptracks"};return a=s(a),o(a,r)}function P(t,r){return F.apply(R,arguments).then(function(t){return t.data.error||!t.data.toptracks?J(t,"Couldn't find tracks"):t.data.toptracks.track})}function I(t){var r={method:"chart.gettopartists"};return o(r,t)}function E(t){return I.apply(R,arguments).then(function(t){return t.data.error||!t.data.artists?J(t,"Couldn't find artist"):t.data.artists.artist})}function $(t){var r={method:"chart.gettoptags"};return o(r,t)}function w(t){return $.apply(R,arguments).then(function(t){return t.data.error||!t.data.tags?J(t,"Couldn't find tags"):t.data.tags.tag})}function K(t){var r={method:"chart.gettoptracks"};return o(r,t)}function j(t){return K.apply(R,arguments).then(function(t){return t.data.error||!t.data.tracks?J(t,"Couldn't find tracks"):t.data.tracks.track})}function x(t,r){var a={country:t,method:"geo.gettopartists"};return o(a,r)}function L(t,r){return x.apply(R,arguments).then(function(t){return t.data.error||!t.data.topartists?J(t,"Couldn't find artists"):t.data.topartists.artist})}function M(t,r){var a={country:t,method:"geo.gettoptracks"};return o(a,r)}function q(t,r){return M.apply(R,arguments).then(function(t){return t.data.error||!t.data.tracks?J(t,"Couldn't find tracks"):t.data.tracks.track})}function G(t,r){var a={track:t,method:"track.search"};return o(a,r)}function N(t,r){return G.apply(e.prototype,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.trackmatches?t.data.results.trackmatches.track:J(t,"Couldn't find track")})}function O(t,r,a){var n={artist:t,track:r,method:"track.getsimilar"};return n=s(n),o(n,a)}function U(t,r,a){return O.apply(R,arguments).then(function(t){return t.data.error||!t.data.similartracks?J(t,"Couldn't find similar tracks"):t.data.similartracks.track})}function z(t,r,a){var n={artist:t,track:r,method:"track.gettoptags"};return n=s(n),o(n,a)}function B(t,r,a){return z.apply(R,arguments).then(function(t){return t.data.error||!t.data.toptags?J(t,"Couldn't find tags"):t.data.toptags.tag})}function D(t,r,a){var n={artist:t,track:r,method:"track.getInfo"};return n=s(n),o(n,a)}function H(t,r,a){return D.apply(R,arguments).then(function(t){return t.data.error||!t.data.track?J(t,"Couldn't find track"):t.data.track})}function J(t,r){var n={error:t.data.error||!0,statusText:t.data.message||r||"Error"};return a.reject(n)}var Q=/^[a-fA-F0-9]{8}(-[a-fA-F0-9]{4}){3}-[a-fA-F0-9]{12}$/;e.prototype={getParams:u,isMbid:i,Album:{album:d,search:p,topTags:m,_album:c,_search:f,_topTags:l},Artist:{albums:g,artist:y,search:v,similar:C,topTags:A,tracks:P,_albums:h,_artist:k,_search:b,_similar:_,_topTags:T,_tracks:F},Charts:{topArtists:E,topTags:w,topTracks:j,_topArtists:I,_topTags:$,_topTracks:K},Geo:{topArtists:L,topTracks:q,_topArtists:x,_topTracks:M},Track:{search:N,similar:U,topTags:B,track:H,_search:G,_similar:O,_topTags:z,_track:D}};var R=e.prototype;return new e}]}angular.module("lastfm",[]).provider("LastFM",t)}();
//# sourceMappingURL=maps/angular.lastfm.min.js.map
