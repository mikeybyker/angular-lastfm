!function(){"use strict";function t(){var t="http://ws.audioscrobbler.com/2.0/",r={api_key:null,format:"json"};this.setAPIKey=function(t){return r.api_key=t,r.api_key},this.getAPIKey=function(){return r.api_key},this.setFormat=function(t){return r.format=t,r.format},this.getFormat=function(){return r.format},this.setEndPoint=function(r){return t=r},this.getEndPoint=function(){return t},this.$get=["$q","$http",function(a,n){function e(){if(this.version="1.0.0",!r.api_key)throw"LastFm API key NOT set : Use setAPIKey on the provider in config..."}function o(r,a){var e=u(r,a);return n.get(t,{params:e})}function u(t,a){return angular.extend({},r,t,a||{})}function i(t,r){return r=r||"artist",s(t[r])&&(t.mbid=t[r],t[r]=""),t}function s(t){return J.test(t)}function c(t,r,a){var n={artist:t,album:r,method:"album.getinfo"};return n=i(n),o(n,a)}function d(t,r,a){return c.apply(Q,arguments).then(function(t){return t.data.error||!t.data.album?H(t,"Couldn't find this album"):t.data.album})}function f(t,r,a){var n={method:"album.gettoptags",album:r,artist:t};return n=i(n),o(n,a)}function p(t,r,a){return f.apply(Q,arguments).then(function(t){return t.data.error||!t.data.toptags?H(t,"Error looking up tags"):t.data.toptags.tag})}function g(t,r){var a={album:t,method:"album.search"};return o(a,r)}function l(t,r){return g.apply(Q,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.albummatches?t.data.results.albummatches.album:H(t,"Couldn't find this album")})}function m(t,r){var a={artist:t,method:"artist.getinfo"};return a=i(a),o(a,r)}function h(t,r){return m.apply(Q,arguments).then(function(t){return t.data.error||!t.data.artist?H(t,"Couldn't find artist"):t.data.artist})}function k(t,r){var a={artist:t,method:"artist.getsimilar"};return a=i(a),o(a,r)}function T(t,r){return k.apply(Q,arguments).then(function(t){return t.data.error||!t.data.similarartists?H(t,"Couldn't find similar artists"):t.data.similarartists.artist})}function y(t,r){var a={artist:t,method:"artist.gettopalbums"};return a=i(a),o(a,r)}function v(t,r){return y.apply(Q,arguments).then(function(t){return t.data.error||!t.data.topalbums?H(t,"Couldn't find albums"):t.data.topalbums.album})}function b(t,r){var a={artist:t,method:"artist.gettoptags"};return a=i(a),o(a,r)}function _(t,r){return b.apply(Q,arguments).then(function(t){return t.data.error||!t.data.toptags?H(t,"Couldn't find tags"):t.data.toptags.tag})}function C(t,r){var a={artist:t,method:"artist.gettoptracks"};return a=i(a),o(a,r)}function A(t,r){return C.apply(Q,arguments).then(function(t){return t.data.error||!t.data.toptracks?H(t,"Couldn't find tracks"):t.data.toptracks.track})}function I(t,r){var a={artist:t,method:"artist.search"};return o(a,r)}function F(t,r){return I.apply(Q,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.artistmatches?t.data.results.artistmatches.artist:H(t,"Couldn't find artist")})}function P(t){var r={method:"chart.gettopartists"};return o(r,t)}function E(t){return P.apply(Q,arguments).then(function(t){return t.data.error||!t.data.artists?H(t,"Couldn't find artist"):t.data.artists.artist})}function S(t){var r={method:"chart.gettoptags"};return o(r,t)}function $(t){return S.apply(Q,arguments).then(function(t){return t.data.error||!t.data.tags?H(t,"Couldn't find tags"):t.data.tags.tag})}function w(t){var r={method:"chart.gettoptracks"};return o(r,t)}function K(t){return w.apply(Q,arguments).then(function(t){return t.data.error||!t.data.tracks?H(t,"Couldn't find tracks"):t.data.tracks.track})}function j(t,r){var a={country:t,method:"geo.gettopartists"};return o(a,r)}function x(t,r){return j.apply(Q,arguments).then(function(t){return t.data.error||!t.data.topartists?H(t,"Couldn't find artists"):t.data.topartists.artist})}function L(t,r){var a={country:t,method:"geo.gettoptracks"};return o(a,r)}function M(t,r){return L.apply(Q,arguments).then(function(t){return t.data.error||!t.data.tracks?H(t,"Couldn't find tracks"):t.data.tracks.track})}function q(t,r,a){var n={artist:t,track:r,method:"track.getInfo"};return n=i(n),o(n,a)}function G(t,r,a){return q.apply(Q,arguments).then(function(t){return t.data.error||!t.data.track?H(t,"Couldn't find track"):t.data.track})}function N(t,r,a){var n={artist:t,track:r,method:"track.getsimilar"};return n=i(n),o(n,a)}function O(t,r,a){return N.apply(Q,arguments).then(function(t){return t.data.error||!t.data.similartracks?H(t,"Couldn't find similar tracks"):t.data.similartracks.track})}function U(t,r,a){var n={artist:t,track:r,method:"track.gettoptags"};return n=i(n),o(n,a)}function z(t,r,a){return U.apply(Q,arguments).then(function(t){return t.data.error||!t.data.toptags?H(t,"Couldn't find tags"):t.data.toptags.tag})}function B(t,r){var a={track:t,method:"track.search"};return o(a,r)}function D(t,r){return B.apply(e.prototype,arguments).then(function(t){return!t.data.error&&t.data.results&&t.data.results.trackmatches?t.data.results.trackmatches.track:H(t,"Couldn't find track")})}function H(t,r){var n={error:t.data.error||!0,statusText:t.data.message||r||"Error"};return a.reject(n)}var J=/^[a-fA-F0-9]{8}(-[a-fA-F0-9]{4}){3}-[a-fA-F0-9]{12}$/;e.prototype={getParams:u,isMbid:s,Album:{getInfo:d,getTopTags:p,search:l,_getInfo:c,_getTopTags:f,_search:g},Artist:{getInfo:h,getSimilar:T,getTopAlbums:v,getTopTags:_,getTopTracks:A,search:F,_getInfo:m,_getSimilar:k,_getTopAlbums:y,_getTopTags:b,_getTopTracks:C,_search:I},Charts:{getTopArtists:E,getTopTags:$,getTopTracks:K,_getTopArtists:P,_getTopTags:S,_getTopTracks:w},Geo:{getTopArtists:x,getTopTracks:M,_getTopArtists:j,_getTopTracks:L},Track:{getInfo:G,getSimilar:O,getTopTags:z,search:D,_getInfo:q,_getSimilar:N,_getTopTags:U,_search:B}};var Q=e.prototype;return new e}]}angular.module("lastfm",[]).provider("LastFM",t)}();
//# sourceMappingURL=maps/angular.lastfm.min.js.map
